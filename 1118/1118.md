# ROUTE進捗報告 2024/11/18

## 前回までの進捗
VRoid Studioで女の子のモデルを作成し、VRMファイルとしてBlenderにインポートする。Blender上で、VRMファイルのアーマチュア（キャラクターの骨格）をBVHファイルのアーマチュア（モーションキャプチャの骨格）に自動ウェイトを使用して適合させる。これらのプロセスをPythonを使って自動化するため、VRoidモデルの腕の長さをBVHデータの腕の長さに一致させるコードを作成してみた。

## 今回の取り組み
### 概要
前回のVRoidモデルの腕の長さをBVHデータの腕の長さに一致させるプロセスの大きさと向きの問題点について、考察して改善する。問題点を特定するため、今回では、前腕のみをターゲットにする。

### Pythonプログラムの説明
- VRoidモデルの前腕がBVHデータより短いため、BVHの長さに合わせる調整を目標とする。
- VRoidおよびBVHアーマチュアの前腕の長さを取得し、Pythonコードを用いてVRoidモデルの前腕をBVHの前腕の長さに合わせてスケーリングする。
- 調整後のVRoidモデルとBVHの腕の長さを出力し、一致しているかどうかを確認できるようにする。

### 結果
- **コンソール出力**:
    - コンソール上で、VRoidモデルとBVHの腕の長さが調整後に一致していることを確認できる。
    - コンソールの結果は以下の通り。
    ![image](https://github.com/user-attachments/assets/4041c9e0-513e-4a45-8e3a-e0f061422fdf)
    - BVHファイルのスケールを縮小したコンソールの結果
    ![image](https://github.com/user-attachments/assets/89265b3e-16bf-4c84-b5c2-455d904ceaf4)

- **Blenderレイアウト**:
    - Blenderでのビジュアル確認結果は以下の通り。
    ![image](https://github.com/user-attachments/assets/25dfcb15-d5c9-4f47-84c3-c4118f4eae1a)
    ![image](https://github.com/user-attachments/assets/c22cc366-74c6-47b2-a7d4-14c6f5fe2442)
    - BVHファイルのスケールを縮小したビジュアルの結果
    ![image](https://github.com/user-attachments/assets/2310c40e-6cdd-453a-8f0b-cd4fec5dd702)

- **現状の問題点**:
    - 調整後のVRoidモデルの腕の長さは数値的にはBVHと一致しているが、BVHを調整してもレイアウト上では、腕の形状が大きすぎ、向きも正しくない。
    - 前回では、VRMファイルのモデルをBVHファイルのスケールに合わせて拡大して、今回では、BVHファイルを調整して、２回とも腕の大きさが間違っている。また、今回では、BVHファイルを調整しないままでで、実行して、腕の大きさは見た目が一致していない。だけど、コンソールの結果は一致していると表示する。コードの問題かなと推測する。

### 課題と未解決事項
- 腕の形状がBVHに合わない原因を特定できていない。--> 
- どのパラメータを調整すべきかが不明である。

## 今後の方針
- まだ。
