# ROUTE進捗報告 2024/11/18

## 前回までの進捗
VRoid Studioを使用して女の子のモデルを作成し、VRMファイルとしてBlenderにインポートした。Blender上では、VRMファイルのアーマチュア（キャラクターの骨格）をBVHファイルのアーマチュア（モーションキャプチャの骨格）に適合させる作業を行い、自動ウェイトを使用して調整した。これらのプロセスをPythonスクリプトで自動化することを目指し、VRoidモデルの腕の長さをBVHデータの腕の長さに一致させるコードを試作した。

## 今回の取り組み
### 概要
前回の取り組みでは、VRoidモデルの腕の長さをBVHデータに一致させる際に発生した長さや向きに関する問題点が明らかになった。今回は、その問題点を詳細に検討し、解決に向けた改善策を試んだ。特に、対象を前腕に限定することで、問題の特定と対処を進めようとした。

### Pythonプログラムの説明
- **調整の目的**: VRoidモデルの前腕がBVHデータの前腕より短いため、Pythonコードを用いてVRoidモデルの前腕をBVHデータの前腕の長さに一致させることを目標とした。
- **具体的な処理**:
  1. VRoidおよびBVHアーマチュアの前腕の長さを取得。
  2. VRoidモデルの前腕のボーンをBVHデータの前腕の長さにスケーリングして調整。
  3. 調整後のVRoidモデルとBVHデータの前腕の長さを出力し、一致しているかどうかを確認。

### 結果
- **コンソール出力**:
    - コンソール上で、VRoidモデルとBVHの腕の長さが調整後に数値的に一致していることを確認できる。
    - コンソールの結果は以下の通り。
    ![image](https://github.com/user-attachments/assets/4041c9e0-513e-4a45-8e3a-e0f061422fdf)
    - BVHファイルのスケールを縮小したコンソールの結果
    ![image](https://github.com/user-attachments/assets/89265b3e-16bf-4c84-b5c2-455d904ceaf4)

- **Blenderレイアウト**:
    - Blenderでのビジュアル確認結果は以下の通り。
    ![image](https://github.com/user-attachments/assets/25dfcb15-d5c9-4f47-84c3-c4118f4eae1a)
    ![image](https://github.com/user-attachments/assets/c22cc366-74c6-47b2-a7d4-14c6f5fe2442)
    - BVHファイルのスケールを縮小したビジュアルの結果
    ![image](https://github.com/user-attachments/assets/2310c40e-6cdd-453a-8f0b-cd4fec5dd702)

- **現状の問題点**:
    - 前回の作業では、VRMファイルのモデルをBVHファイルのスケールに合わせて拡大したが、今回の作業ではBVHファイルを調整しても、腕の大きさや向きが正しく表示されない。さらに、BVHファイルを調整せずに実行した場合、コンソールでは長さが一致していると表示されるものの、見た目には一致していない状態である。このことから、コードに問題がある可能性があると考えている。

### 課題と未解決事項
- 腕の形状がBVHに合わない原因を特定できていない。
- ボーンのみ変更されて、メッシュは変更されない。

## 今後の方針
- 未定。
